=== Quy trình làm việc Phân nhánh

Bây giờ bạn đã nắm được những điều cơ bản về phân nhánh và hợp nhất, bạn có thể hoặc nên làm gì với chúng?
Trong phần này, chúng ta sẽ đề cập đến một số quy trình làm việc phổ biến mà việc phân nhánh nhẹ này thực hiện được, vì vậy bạn có thể quyết định xem bạn có muốn kết hợp chúng vào chu trình phát triển của riêng mình hay không.

==== Các Nhánh Chạy Dài

(((branches, long-running)))
Bởi vì Git sử dụng hợp nhất ba chiều đơn giản, việc hợp nhất từ nhánh này sang nhánh khác nhiều lần trong một thời gian dài thường dễ thực hiện.
Điều này có nghĩa là bạn có thể có một vài nhánh luôn mở và bạn sử dụng cho các giai đoạn khác nhau của chu trình phát triển của mình; bạn có thể hợp nhất thường xuyên từ một số trong số chúng vào những cái khác.

Nhiều nhà phát triển Git có một quy trình làm việc bao gồm cách tiếp cận này, chẳng hạn như chỉ có mã hoàn toàn ổn định trong nhánh `master` của họ -- có thể chỉ là mã đã hoặc sẽ được phát hành.
Họ có một nhánh song song khác tên là `develop` hoặc `next` mà họ làm việc hoặc sử dụng để kiểm tra độ ổn định -- nó không nhất thiết phải luôn ổn định, nhưng bất cứ khi nào nó đạt đến trạng thái ổn định, nó có thể được hợp nhất vào `master`.
Nó được sử dụng để kéo các nhánh chủ đề (các nhánh tồn tại trong thời gian ngắn, giống như nhánh `iss53` trước đó của bạn) khi chúng đã sẵn sàng, để đảm bảo chúng vượt qua tất cả các bài kiểm tra và không gây ra lỗi.

Trong thực tế, chúng ta đang nói về các con trỏ di chuyển lên dòng cam kết mà bạn đang thực hiện.
Các nhánh ổn định ở xa hơn dòng trong lịch sử cam kết của bạn, và các nhánh tiên tiến (bleeding-edge) ở xa hơn lịch sử.

.Một cái nhìn tuyến tính về phân nhánh ổn định lũy tiến
image::images/lr-branches-1.png[Một cái nhìn tuyến tính về phân nhánh ổn định lũy tiến]

Nói chung, dễ dàng hơn để nghĩ về chúng như các silo công việc, nơi các bộ cam kết tốt nghiệp sang một silo ổn định hơn khi chúng được kiểm tra đầy đủ.

[[lrbranch_b]]
.Một cái nhìn "`silo`" về phân nhánh ổn định lũy tiến
image::images/lr-branches-2.png[Một cái nhìn “silo” về phân nhánh ổn định lũy tiến]

Bạn có thể tiếp tục làm điều này cho một số cấp độ ổn định.
Một số dự án lớn hơn cũng có một nhánh `proposed` hoặc `pu` (cập nhật đề xuất - proposed updates) có các nhánh tích hợp có thể chưa sẵn sàng để đi vào nhánh `next` hoặc `master`.
Ý tưởng là các nhánh của bạn ở các mức độ ổn định khác nhau; khi chúng đạt đến mức ổn định hơn, chúng được hợp nhất vào nhánh phía trên chúng.
Một lần nữa, việc có nhiều nhánh chạy dài là không cần thiết, nhưng nó thường hữu ích, đặc biệt là khi bạn đang xử lý các dự án rất lớn hoặc phức tạp.

[[_topic_branch]]
==== Các Nhánh Chủ đề

(((branches, topic)))
Tuy nhiên, các nhánh chủ đề rất hữu ích trong các dự án ở mọi quy mô.
Một nhánh chủ đề là một nhánh tồn tại trong thời gian ngắn mà bạn tạo và sử dụng cho một tính năng cụ thể hoặc công việc liên quan.
Đây là điều mà bạn có thể chưa bao giờ làm với VCS trước đây vì việc tạo và hợp nhất các nhánh thường quá tốn kém.
Nhưng trong Git, việc tạo, làm việc, hợp nhất và xóa các nhánh nhiều lần trong ngày là điều phổ biến.

Bạn đã thấy điều này trong phần trước với các nhánh `iss53` và `hotfix` mà bạn đã tạo.
Bạn đã thực hiện một vài cam kết trên chúng và xóa chúng trực tiếp sau khi hợp nhất chúng vào nhánh chính của mình.
Kỹ thuật này cho phép bạn chuyển đổi ngữ cảnh nhanh chóng và hoàn toàn -- bởi vì công việc của bạn được tách thành các silo nơi tất cả các thay đổi trong nhánh đó đều liên quan đến chủ đề đó, nên dễ dàng hơn để xem những gì đã xảy ra trong quá trình xem xét mã và những thứ tương tự.
Bạn có thể giữ các thay đổi ở đó trong vài phút, vài ngày hoặc vài tháng và hợp nhất chúng khi chúng sẵn sàng, bất kể thứ tự chúng được tạo hoặc làm việc.

Hãy xem xét một ví dụ về việc thực hiện một số công việc (trên `master`), phân nhánh cho một vấn đề (`iss91`), làm việc trên đó một chút, phân nhánh khỏi nhánh thứ hai để thử một cách khác để xử lý cùng một vấn đề (`iss91v2`), quay lại nhánh `master` của bạn và làm việc ở đó một lúc, và sau đó phân nhánh ở đó để thực hiện một số công việc mà bạn không chắc là một ý tưởng hay (nhánh `dumbidea`).
Lịch sử cam kết của bạn sẽ trông giống như thế này:

.Nhiều nhánh chủ đề
image::images/topic-branches-1.png[Nhiều nhánh chủ đề]

Bây giờ, giả sử bạn quyết định bạn thích giải pháp thứ hai cho vấn đề của mình nhất (`iss91v2`); và bạn đã cho đồng nghiệp xem nhánh `dumbidea`, và nó trở thành thiên tài.
Bạn có thể vứt bỏ nhánh `iss91` ban đầu (mất các cam kết `C5` và `C6`) và hợp nhất hai nhánh kia.
Lịch sử của bạn sau đó trông giống như thế này:

.Lịch sử sau khi hợp nhất `dumbidea` và `iss91v2`
image::images/topic-branches-2.png[Lịch sử sau khi hợp nhất `dumbidea` và `iss91v2`]

Chúng tôi sẽ đi sâu hơn vào chi tiết về các quy trình làm việc khác nhau có thể có cho dự án Git của bạn trong <<ch05-distributed-git#ch05-distributed-git>>, vì vậy trước khi bạn quyết định sơ đồ phân nhánh nào dự án tiếp theo của bạn sẽ sử dụng, hãy chắc chắn đọc chương đó.

Điều quan trọng cần nhớ khi bạn đang làm tất cả những điều này là các nhánh này hoàn toàn là cục bộ.
Khi bạn đang phân nhánh và hợp nhất, mọi thứ chỉ được thực hiện trong kho lưu trữ Git của bạn -- không có giao tiếp với máy chủ.
