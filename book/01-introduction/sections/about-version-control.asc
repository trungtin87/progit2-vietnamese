=== Về Kiểm soát Phiên bản

(((version control)))
"`Kiểm soát phiên bản`" là gì, và tại sao bạn nên quan tâm?
Kiểm soát phiên bản là một hệ thống ghi lại các thay đổi đối với một tệp hoặc tập hợp các tệp theo thời gian để bạn có thể gọi lại các phiên bản cụ thể sau này.
Đối với các ví dụ trong cuốn sách này, bạn sẽ sử dụng mã nguồn phần mềm làm các tệp được kiểm soát phiên bản, mặc dù trong thực tế, bạn có thể làm điều này với gần như bất kỳ loại tệp nào trên máy tính.

Nếu bạn là một nhà thiết kế đồ họa hoặc web và muốn giữ mọi phiên bản của một hình ảnh hoặc bố cục (điều mà bạn chắc chắn sẽ muốn), một Hệ thống Kiểm soát Phiên bản (VCS) là một điều rất khôn ngoan để sử dụng.
Nó cho phép bạn hoàn tác các tệp đã chọn trở lại trạng thái trước đó, hoàn tác toàn bộ dự án trở lại trạng thái trước đó, so sánh các thay đổi theo thời gian, xem ai đã sửa đổi lần cuối cùng một cái gì đó có thể gây ra sự cố, ai đã giới thiệu một vấn đề và khi nào, và hơn thế nữa.
Sử dụng VCS cũng thường có nghĩa là nếu bạn làm hỏng mọi thứ hoặc mất tệp, bạn có thể dễ dàng khôi phục.
Ngoài ra, bạn nhận được tất cả những điều này với rất ít chi phí.

==== Hệ thống Kiểm soát Phiên bản Cục bộ

(((version control,local)))
Phương pháp kiểm soát phiên bản được lựa chọn của nhiều người là sao chép các tệp vào một thư mục khác (có thể là một thư mục có dấu thời gian, nếu họ thông minh).
Cách tiếp cận này rất phổ biến vì nó rất đơn giản, nhưng nó cũng cực kỳ dễ bị lỗi.
Thật dễ dàng để quên bạn đang ở thư mục nào và vô tình ghi vào sai tệp hoặc sao chép qua các tệp bạn không có ý định.

Để giải quyết vấn đề này, các lập trình viên từ lâu đã phát triển các VCS cục bộ có một cơ sở dữ liệu đơn giản giữ tất cả các thay đổi đối với các tệp dưới sự kiểm soát sửa đổi.

.Sơ đồ kiểm soát phiên bản cục bộ
image::images/local.png[Sơ đồ kiểm soát phiên bản cục bộ]

Một trong những công cụ VCS phổ biến nhất là một hệ thống có tên là RCS, vẫn được phân phối với nhiều máy tính ngày nay.
https://www.gnu.org/software/rcs/[RCS^] hoạt động bằng cách giữ các bộ bản vá (nghĩa là sự khác biệt giữa các tệp) ở định dạng đặc biệt trên đĩa; sau đó nó có thể tạo lại bất kỳ tệp nào trông như thế nào tại bất kỳ thời điểm nào bằng cách cộng tất cả các bản vá.

==== Hệ thống Kiểm soát Phiên bản Tập trung

(((version control,centralized)))
Vấn đề lớn tiếp theo mà mọi người gặp phải là họ cần cộng tác với các nhà phát triển trên các hệ thống khác.
Để giải quyết vấn đề này, Hệ thống Kiểm soát Phiên bản Tập trung (CVCSs) đã được phát triển.
Các hệ thống này (như CVS, Subversion và Perforce) có một máy chủ duy nhất chứa tất cả các tệp được tạo phiên bản và một số máy khách kiểm xuất các tệp từ nơi trung tâm đó.(((CVS)))(((Subversion)))(((Perforce)))
Trong nhiều năm, đây đã là tiêu chuẩn cho kiểm soát phiên bản.

.Sơ đồ kiểm soát phiên bản tập trung
image::images/centralized.png[Sơ đồ kiểm soát phiên bản tập trung]

Thiết lập này cung cấp nhiều lợi thế, đặc biệt là so với các VCS cục bộ.
Ví dụ, mọi người đều biết ở một mức độ nhất định những gì người khác trong dự án đang làm.
Quản trị viên có quyền kiểm soát chi tiết đối với ai có thể làm gì và quản trị một CVCS dễ dàng hơn nhiều so với việc xử lý các cơ sở dữ liệu cục bộ trên mọi máy khách.

Tuy nhiên, thiết lập này cũng có một số nhược điểm nghiêm trọng.
Rõ ràng nhất là điểm lỗi duy nhất mà máy chủ tập trung đại diện.
Nếu máy chủ đó bị hỏng trong một giờ, thì trong giờ đó, không ai có thể cộng tác hoặc lưu các thay đổi đã được tạo phiên bản vào bất cứ thứ gì họ đang làm việc.
Nếu đĩa cứng mà cơ sở dữ liệu trung tâm nằm trên đó bị hỏng và các bản sao lưu thích hợp chưa được giữ, bạn sẽ mất hoàn toàn mọi thứ -- toàn bộ lịch sử của dự án ngoại trừ bất kỳ ảnh chụp nhanh đơn lẻ nào mà mọi người tình cờ có trên máy cục bộ của họ.
Các VCS cục bộ cũng gặp vấn đề tương tự -- bất cứ khi nào bạn có toàn bộ lịch sử của dự án ở một nơi duy nhất, bạn có nguy cơ mất tất cả.

==== Hệ thống Kiểm soát Phiên bản Phân tán

(((version control,distributed)))
Đây là nơi Hệ thống Kiểm soát Phiên bản Phân tán (DVCSs) bước vào.
Trong một DVCS (như Git, Mercurial hoặc Darcs), các máy khách không chỉ kiểm xuất ảnh chụp nhanh mới nhất của các tệp; thay vào đó, họ phản chiếu đầy đủ kho lưu trữ, bao gồm cả lịch sử đầy đủ của nó.
Do đó, nếu bất kỳ máy chủ nào bị chết và các hệ thống này đang cộng tác qua máy chủ đó, bất kỳ kho lưu trữ máy khách nào cũng có thể được sao chép lại lên máy chủ để khôi phục nó.
Mỗi bản sao thực sự là một bản sao lưu đầy đủ của tất cả dữ liệu.

.Sơ đồ kiểm soát phiên bản phân tán
image::images/distributed.png[Sơ đồ kiểm soát phiên bản phân tán]

Hơn nữa, nhiều hệ thống trong số này xử lý khá tốt việc có một số kho lưu trữ từ xa mà họ có thể làm việc cùng, vì vậy bạn có thể cộng tác với các nhóm người khác nhau theo những cách khác nhau đồng thời trong cùng một dự án.
Điều này cho phép bạn thiết lập một số loại quy trình làm việc không thể thực hiện được trong các hệ thống tập trung, chẳng hạn như các mô hình phân cấp.
