[[_maintaining_gh_project]]
=== Duy trì một Dự án

Bây giờ chúng ta đã quen với việc đóng góp vào một dự án, hãy cùng xem xét mặt còn lại: tạo, duy trì và quản trị dự án của riêng bạn.

==== Tạo một Kho lưu trữ Mới

Hãy tạo một kho lưu trữ mới để chia sẻ mã dự án của chúng ta.
Bắt đầu bằng cách nhấp vào nút "`New repository`" ở phía bên phải của bảng điều khiển, hoặc từ nút `+` trên thanh công cụ trên cùng bên cạnh tên người dùng của bạn như đã thấy trong <<_new_repo_dropdown>>.

[[_new_repo_dropdown]]
.Trình đơn thả xuống "New repository"
image::images/new-repo-dropdown.png[Trình đơn thả xuống "New repository" ]

Điều này sẽ đưa bạn đến biểu mẫu "kho lưu trữ mới":

.Biểu mẫu "kho lưu trữ mới"
image::images/new-repo.png[Biểu mẫu "kho lưu trữ mới" ]

Tất cả những gì biểu mẫu này thực sự yêu cầu là một tên dự án; các trường khác đều là tùy chọn.
Hiện tại, chỉ cần nhấp vào nút "`Create Repository`", và bùm -- bạn có một kho lưu trữ mới trên GitHub, có tên là `project`.

Vì bạn chưa có mã nào ở đó, GitHub sẽ hiển thị cho bạn các hướng dẫn về cách tạo một kho lưu trữ mới trên máy cục bộ của bạn và đẩy nó lên, cách đẩy lên một kho lưu trữ Git hiện có, hoặc cách nhập một kho lưu trữ từ một kho lưu trữ Subversion như đã thấy trong <<_repo_quick_setup>>.

[[_repo_quick_setup]]
.Hướng dẫn thiết lập nhanh cho một kho lưu trữ mới
image::images/repo-quick-setup.png[Hướng dẫn thiết lập nhanh cho một kho lưu trữ mới]

Những hướng dẫn này tương tự như những gì chúng ta đã xem qua.
Để khởi tạo một dự án chưa được phiên bản, bạn sẽ sử dụng:

[source,console]
----
$ git init
$ git add .
$ git commit -m 'initial commit'
$ git remote add origin https://github.com/testinguser/project.git
$ git push -u origin master
----

Bây giờ bạn có một kho lưu trữ Git trên GitHub, và một bản sao cục bộ của nó đã được kiểm xuất.
Bạn có thể đẩy lên nó bất cứ khi nào bạn muốn.

==== Thêm Cộng tác viên

Bây giờ giả sử bạn muốn làm việc với một số người.
Nếu bạn muốn cấp cho người khác quyền đẩy vào kho lưu trữ của mình, bạn phải thêm họ làm "cộng tác viên".
Nếu Ben, Tony, và Jessica đăng ký tài khoản trên GitHub, và bạn muốn cấp cho họ quyền đẩy vào kho lưu trữ của mình, bạn có thể thêm họ vào dự án của mình.
Làm như vậy sẽ cấp cho họ quyền đẩy, có nghĩa là họ có cả quyền đọc và ghi vào dự án và kho lưu trữ Git.

Nhấp vào liên kết "`Settings`" ở cuối thanh bên phải.

.Liên kết "Cài đặt" của kho lưu trữ
image::images/repo-settings-link.png[Liên kết "Cài đặt" của kho lưu trữ]

Sau đó chọn "`Collaborators`" từ menu bên trái.
Sau đó, nhập tên người dùng vào hộp và nhấp vào "`Add collaborator`."

.Thêm một cộng tác viên
image::images/repo-collaborators.png[Thêm một cộng tác viên]

Bạn có thể lặp lại điều này bao nhiêu lần tùy thích để cấp quyền truy cập cho mọi người bạn muốn; bạn có thể thấy tất cả những người có quyền truy cập trong danh sách cộng tác viên.

.Một danh sách các cộng tác viên
image::images/repo-collaborator-list.png[Một danh sách các cộng tác viên]

Nếu bạn cần thu hồi quyền truy cập của ai đó, chỉ cần nhấp vào "X" ở bên phải hàng của họ.

==== Quản lý các Yêu cầu Kéo

Bây giờ bạn có một dự án với một số mã trong đó và có thể cả một vài cộng tác viên có quyền đẩy, hãy cùng xem phải làm gì khi bạn tự nhận được một Yêu cầu Kéo.

Các Yêu cầu Kéo có thể đến từ một nhánh trong một nhánh của kho lưu trữ của bạn, hoặc chúng có thể đến từ một nhánh khác trong cùng một kho lưu trữ.
Sự khác biệt duy nhất là những yêu cầu từ một nhánh thường đến từ những người mà bạn không thể đẩy vào nhánh của họ và họ không thể đẩy vào nhánh của bạn, trong khi với các Yêu cầu Kéo nội bộ, cả hai bên thường có thể truy cập vào nhánh.

Đối với những ví dụ này, giả sử bạn là "tonychacon" và bạn đã tạo một dự án Arduino mới có tên là "blink".

===== Thông báo Yêu cầu Kéo

Ai đó đến, phân nhánh dự án của bạn, thực hiện một thay đổi và mở một Yêu cầu Kéo.
Bạn sẽ nhận được một email về Yêu cầu Kéo mới sẽ trông giống như <<_pr_notification_email>>.

[[_pr_notification_email]]
.Email thông báo Yêu cầu Kéo
image::images/pr-notification-email.png[Email thông báo Yêu cầu Kéo]

Có một vài điều cần chú ý về email này.
Nó sẽ cung cấp cho bạn một diffstat nhỏ -- một danh sách các tệp đã thay đổi trong Yêu cầu Kéo và mức độ thay đổi.
Nó cung cấp cho bạn một liên kết đến Yêu cầu Kéo trên GitHub.
Nó cũng cung cấp cho bạn một vài URL mà bạn có thể sử dụng từ dòng lệnh.

Nếu bạn để ý dòng chữ `git pull <url> patch-1`, đây là một cách đơn giản để hợp nhất một nhánh từ xa mà không cần phải thêm một điều khiển từ xa.
Chúng ta đã xem qua điều này một cách ngắn gọn trong <<_checking_out_remote_branches>>.
Nếu bạn muốn, bạn có thể tạo và chuyển sang một nhánh chủ đề và sau đó chạy lệnh này để hợp nhất các thay đổi của Yêu cầu Kéo.

Các URL thú vị khác là các URL `.diff` và `.patch`, như bạn có thể đoán, cung cấp các phiên bản diff thống nhất và bản vá của Yêu cầu Kéo.
Về mặt kỹ thuật, bạn có thể hợp nhất công việc của Yêu cầu Kéo với một cái gì đó như thế này:

[source,console]
----
$ curl https://github.com/tonychacon/blink/pull/1.patch | git am
----

===== Thử nghiệm trong một Nhánh Yêu cầu Kéo

Như chúng ta đã đề cập trong <<_github_flow>>, bây giờ bạn có thể có một cuộc trò chuyện với người đã mở Yêu cầu Kéo.
Bạn có thể bình luận về các dòng mã cụ thể, bình luận về toàn bộ các cam kết hoặc bình luận về chính Yêu cầu Kéo, sử dụng GitHub Flavored Markdown ở mọi nơi.

Mỗi khi ai đó khác bình luận về Yêu cầu Kéo, bạn sẽ tiếp tục nhận được thông báo qua email để bạn biết rằng có hoạt động đang diễn ra.
Mỗi email sẽ có một liên kết đến Yêu cầu Kéo nơi hoạt động đang diễn ra, và bạn cũng có thể trả lời trực tiếp email để bình luận về chuỗi Yêu cầu Kéo.

.Trả lời một thông báo email
image::images/pr-email-resp.png[Trả lời một thông báo email]

Khi mã ở một nơi bạn thích và muốn hợp nhất nó vào, bạn có thể kéo mã xuống và hợp nhất nó cục bộ, hoặc bạn có thể sử dụng cú pháp `git pull <url> <branch>` mà chúng ta đã thấy trước đó, hoặc bạn có thể thêm nhánh làm một điều khiển từ xa, tìm nạp và hợp nhất.

Nếu việc hợp nhất là tầm thường, bạn cũng có thể chỉ cần nhấn nút "Merge" trên trang GitHub.
Điều này sẽ thực hiện một hợp nhất "không tua đi nhanh", tạo ra một cam kết hợp nhất ngay cả khi có thể thực hiện một hợp nhất tua đi nhanh.
Điều này có nghĩa là mỗi khi bạn nhấn nút hợp nhất, một cam kết hợp nhất được tạo ra, bất kể có hay không một cam kết sẽ được tạo ra nếu bạn làm điều đó trên dòng lệnh.

Xem <<_merge_button>>.

[[_merge_button]]
.Nút "Merge"
image::images/pr-merge-button.png[Nút "Merge" ]

Nếu bạn quyết định không muốn hợp nhất nó, bạn có thể chỉ cần đóng Yêu cầu Kéo và người đã mở nó sẽ được thông báo.

===== Các Tham chiếu Yêu cầu Kéo

Nếu bạn nhận được _rất nhiều_ Yêu cầu Kéo và không muốn thêm một loạt các điều khiển từ xa hoặc thực hiện các lần kéo một lần mỗi lần, có một mẹo thông minh bạn có thể sử dụng để tìm nạp từ tất cả các nhánh.
Đây là một mẹo Git hơi nâng cao, nhưng nó có thể khá hữu ích.

Git có thể tìm nạp các nhánh từ xa vào một không gian tên khác trên máy cục bộ của bạn nếu bạn muốn.
Nếu bạn nhớ lại từ <<ch03-git-branching#_remote_branches>>, các điều khiển từ xa thông thường sẽ tìm nạp tất cả các nhánh trên máy chủ từ xa vào `refs/remotes/<remote>/`, như `refs/remotes/origin/master`.
Tuy nhiên, nếu bạn có một số nhánh bạn đang thử nghiệm, bạn có thể bảo Git tìm nạp tất cả các Yêu cầu Kéo và giữ chúng được cập nhật mà không cần phải thêm một loạt các điều khiển từ xa.

Bạn có thể làm điều này bằng cách chỉnh sửa thủ công phần `[remote "origin"]` của tệp `.git/config` của bạn.
Nếu bạn có một tệp cấu hình trông như thế này:

[source,console]
----
[remote "origin"]
    url = https://github.com/schacon/blink
    fetch = +refs/heads/*:refs/remotes/origin/*
----

Đây chỉ là phần tiêu chuẩn mà `git clone` tạo ra.
Bạn có thể chỉnh sửa nó để thêm một dòng vào đó để bảo Git tìm nạp tất cả các Yêu cầu Kéo và lưu trữ chúng trong một không gian tên khác.
Ví dụ, nếu bạn muốn tìm nạp mọi Yêu cầu Kéo từ kho lưu trữ `schacon/blink` và lưu trữ chúng trong `refs/remotes/origin/pr/*`, bạn có thể thêm dòng này:

[source,console]
----
[remote "origin"]
    url = https://github.com/schacon/blink
    fetch = +refs/heads/*:refs/remotes/origin/*
    fetch = +refs/pull/*/head:refs/remotes/origin/pr/*
----

Điều này sẽ bảo Git, "Tìm nạp tất cả các nhánh, và cũng tìm nạp tất cả các Yêu cầu Kéo."
Bây giờ, nếu bạn chạy `git fetch`, bạn sẽ thấy tất cả các nhánh từ xa như bạn đã thấy trước đây, nhưng bạn cũng sẽ thấy tất cả các nhánh cho mỗi Yêu cầu Kéo đang mở.

[source,console]
----
$ git fetch
From https://github.com/schacon/blink
 * [new ref]         refs/pull/1/head -> origin/pr/1
 * [new ref]         refs/pull/2/head -> origin/pr/2
...
----

Điều này rất tuyệt, bởi vì bây giờ bạn có thể kiểm tra trực tiếp mã từ một nhánh Yêu cầu Kéo.

[source,console]
----
$ git checkout pr/2
----

Các nhánh mà Git kéo xuống là chỉ đọc, và chúng sẽ được cập nhật mỗi khi bạn `fetch`.
Điều này làm cho việc kiểm tra mã từ một Yêu cầu Kéo cục bộ trở nên siêu dễ dàng.

Tham chiếu `head` trên điều khiển từ xa là nhánh chủ đề của người đóng góp, nhưng cũng có một tham chiếu `merge` đại diện cho trạng thái của mã nếu bạn nhấp vào nút "Merge" trên trang web.
Điều này cho phép bạn kiểm tra việc hợp nhất trước cả khi nhấn nút.

[NOTE]
====
Mẹo này có thể nguy hiểm.
GitHub chỉ có khoảng 400.000 kho lưu trữ có các Yêu cầu Kéo đang mở, nhưng có thể có hàng ngàn Yêu cầu Kéo đang mở trong các dự án bạn quan tâm.
Việc tìm nạp tất cả các Yêu cầu Kéo từ một dự án phổ biến như nhân Linux có thể tải xuống hàng trăm hoặc hàng ngàn nhánh, vì vậy hãy cẩn thận.
====

==== Các Yêu cầu Kéo trên các Yêu cầu Kéo

Bạn không chỉ có thể mở các Yêu cầu Kéo nhắm mục tiêu vào nhánh chính hoặc `master`, mà bạn thực sự có thể mở một Yêu cầu Kéo nhắm mục tiêu vào bất kỳ nhánh nào trong mạng.
Trên thực tế, bạn thậm chí có thể nhắm mục tiêu vào một Yêu cầu Kéo khác.

Đây là một kỹ thuật thực sự hữu ích nếu bạn đang cộng tác với ai đó về một tính năng và bạn có một ý tưởng để cải thiện nhánh tính năng của họ.
Bạn có thể chỉ cần phân nhánh kho lưu trữ của họ, tạo một nhánh nhắm mục tiêu vào cùng một nhánh mà họ đã mở Yêu cầu Kéo, thêm các cam kết của bạn, và sau đó mở một Yêu cầu Kéo mới trở lại nhánh của họ.

Khi bạn mở một Yêu cầu Kéo, có một hộp ở đầu trang chỉ định nhánh nào bạn đang yêu cầu được kéo vào và nhánh nào bạn đang yêu cầu kéo từ đó.
Nếu bạn nhấp vào nút "`Edit`" ở phía bên phải của hộp đó, bạn có thể thay đổi cả nhánh "cơ sở" và "so sánh".

.Thay đổi thủ công nhánh cơ sở của một Yêu cầu Kéo
image::images/pr-base-branch.png[Thay đổi thủ công nhánh cơ sở của một Yêu cầu Kéo]

Bằng cách này, bạn có thể dễ dàng chỉ định rằng nhánh mới của bạn sẽ được hợp nhất vào một Yêu cầu Kéo khác hoặc một nhánh khác của dự án.

==== Đề cập và Thông báo

(((GitHub, notifications)))
Phần khác của khía cạnh mạng xã hội của GitHub mà chúng ta sẽ thảo luận là thông báo.
Bạn có một phần "Notifications" trong cài đặt tài khoản của mình nơi bạn có thể đặt tùy chọn của mình.

.Cài đặt thông báo
image::images/notification-settings.png[Cài đặt thông báo]

Có hai lựa chọn: "Email" và "Web".
Bạn có thể chọn một, cả hai hoặc không chọn cái nào.

===== Thông báo trên Web

Thông báo trên web chỉ tồn tại trên GitHub, và bạn chỉ có thể kiểm tra chúng trên GitHub.
Nếu bạn đã chọn tùy chọn này trong tùy chọn của mình và một thông báo được kích hoạt cho bạn, bạn sẽ thấy một chấm màu xanh nhỏ trên biểu tượng thông báo của mình ở đầu màn hình, như đã thấy trong <<_notifications_icon>>.

[[_notifications_icon]]
.Biểu tượng thông báo
image::images/notifications-icon.png[Biểu tượng thông báo]

Nếu bạn nhấp vào nó, bạn sẽ thấy một danh sách tất cả các mục bạn đã được thông báo, được nhóm theo dự án.
Bạn có thể lọc các thông báo cho một dự án cụ thể bằng cách nhấp vào tên của nó trong thanh bên trái.
Bạn cũng có thể xác nhận một thông báo bằng cách nhấp vào biểu tượng dấu kiểm bên cạnh nó, hoặc xác nhận tất cả các thông báo trong một dự án bằng cách nhấp vào dấu kiểm ở đầu nhóm.
Cũng có một nút "Tắt tiếng" bên cạnh mỗi thông báo sẽ ngăn bạn nhận thêm bất kỳ thông báo nào cho mục đó.

Những công cụ này rất hữu ích để quản lý rất nhiều thông báo.
Nhiều người dùng thành thạo GitHub sẽ chỉ cần tắt hoàn toàn thông báo qua email và quản lý tất cả các thông báo của họ thông qua màn hình này.

===== Thông báo qua Email

Thông báo qua email là cách khác bạn có thể xử lý các thông báo từ GitHub.
Nếu bạn đã bật tính năng này, bạn sẽ nhận được email cho mỗi thông báo.
Chúng ta đã thấy các ví dụ về điều này trong <<_pr_notification_email>> và <<pr-email-resp>>.
Các email cũng sẽ được phân luồng đúng cách, điều này rất hay nếu bạn đang sử dụng một ứng dụng thư khách có phân luồng.

Cũng có rất nhiều siêu dữ liệu được nhúng trong các tiêu đề của các email mà GitHub gửi, điều này có thể rất hữu ích để thiết lập các bộ lọc và quy tắc tùy chỉnh.

Ví dụ, trường `To` của email được gửi khi có một bình luận trên Yêu cầu Kéo #821 trong dự án `schacon/hw` là `schacon/hw <hw@noreply.github.com>`.
Điều này nhất quán cho tất cả các email cho dự án này, vì vậy bạn có thể lọc tất cả email cho dự án này vào một thư mục cụ thể.

Email cũng chứa một tiêu đề `List-Post` chứa một URL.
Bạn có thể sử dụng điều này để đăng lên danh sách (trong trường hợp này, trả lời Yêu cầu Kéo).
Tiêu đề `List-Unsubscribe` cũng có mặt, cung cấp cho bạn một cách dễ dàng để hủy đăng ký khỏi chuỗi.
Nếu bạn không muốn nhận thêm bất kỳ thông báo nào từ Yêu cầu Kéo này, bạn có thể nhấp vào liên kết hủy đăng ký trong tiêu đề.

Để biết thêm thông tin về thông báo qua email, hãy xem các hướng dẫn "Giới thiệu về thông báo qua email" và "Giới thiệu về thông báo trên web" trong tài liệu trợ giúp của GitHub.

==== Các Tệp Đặc biệt

Có một vài tệp đặc biệt mà GitHub sẽ nhận thấy nếu chúng có mặt trong kho lưu trữ của bạn.

===== README

Tệp đầu tiên là tệp `README`, có thể ở hầu hết mọi định dạng mà GitHub nhận dạng là văn xuôi.
Ví dụ, nó có thể là `README`, `README.md`, `README.asciidoc`, v.v.
Nếu GitHub thấy một tệp `README` trong nguồn của bạn, nó sẽ hiển thị nó trên trang đích của kho lưu trữ.

Nhiều nhóm sử dụng tệp này để chứa tất cả thông tin dự án có liên quan cho một người mới làm quen với dự án hoặc kho lưu trữ.
Điều này thường bao gồm những thứ như:

* Dự án dùng để làm gì
* Cách cấu hình và cài đặt nó
* Ví dụ về cách sử dụng nó
* Giấy phép mà dự án được phát hành
* Cách đóng góp vào nó

Vì GitHub sẽ hiển thị tệp này, bạn có thể nhúng hình ảnh hoặc video vào đó để dễ xem.

===== CONTRIBUTING

Tệp đặc biệt khác mà GitHub nhận ra là tệp `CONTRIBUTING`.
Nếu bạn có một tệp có tên `CONTRIBUTING` với bất kỳ phần mở rộng nào (ví dụ: `CONTRIBUTING.md` hoặc `CONTRIBUTING.adoc`), GitHub sẽ hiển thị <<_contributing_file>> khi bạn bắt đầu tạo một Yêu cầu Kéo.

[[_contributing_file]]
.Một liên kết đến tệp CONTRIBUTING khi mở một Yêu cầu Kéo
image::images/contributing-file.png[Một liên kết đến tệp CONTRIBUTING khi mở một Yêu cầu Kéo]

Ý tưởng ở đây là bạn có thể chỉ định những điều cụ thể bạn muốn hoặc không muốn trong một Yêu cầu Kéo được gửi đến dự án của bạn.
Bằng cách này, mọi người có thể thực sự đọc các hướng dẫn đóng góp trước khi mở Yêu cầu Kéo.

==== Quản trị Dự án

Có một vài điều quản trị bạn có thể làm với dự án của mình mà bạn nên biết.

===== Thay đổi Nhánh Mặc định

Một trong số đó là thay đổi nhánh "Mặc định" của kho lưu trữ của bạn.
Đây là nhánh mà GitHub sẽ hiển thị khi ai đó truy cập trang đích kho lưu trữ của bạn, và nó cũng là nhánh mà các Yêu cầu Kéo được mở theo mặc định.

Để thay đổi nhánh mặc định, bạn có thể truy cập trang "Cài đặt" của dự án của bạn và chọn tab "Nhánh".

.Tab "Nhánh" của cài đặt kho lưu trữ
image::images/repo-branches.png[Tab "Nhánh" của cài đặt kho lưu trữ]

Từ đó bạn có thể thay đổi nhánh mặc định.

===== Chuyển giao một Dự án

Bạn cũng có thể chuyển một dự án cho một người dùng khác hoặc một tổ chức nếu bạn muốn.
Điều này hữu ích nếu bạn đang từ bỏ một dự án và ai đó muốn tiếp quản nó, hoặc nếu dự án của bạn trở nên lớn hơn và bạn muốn chuyển nó vào một tổ chức.

Để làm điều này, hãy truy cập trang cài đặt của dự án và nhấp vào nút "Chuyển giao".

.Nút "Chuyển giao quyền sở hữu" trên trang cài đặt của kho lưu trữ
image::images/repo-transfer.png[Nút "Chuyển giao quyền sở hữu" trên trang cài đặt của kho lưu trữ]

[WARNING]
====
Điều này sẽ không chỉ di chuyển kho lưu trữ sang một người dùng hoặc tổ chức khác, mà nó cũng sẽ chuyển hướng tất cả các URL đến vị trí mới.
Nó cũng sẽ chuyển hướng các lần sao chép và tìm nạp từ Git, không chỉ các yêu cầu web.
====