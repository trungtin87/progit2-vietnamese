[[_plumbing_porcelain]]
=== Plumbing và Porcelain

Cuốn sách này chủ yếu đề cập đến cách sử dụng Git với khoảng 30 lệnh con như `checkout`, `branch`, `remote`, v.v.
Nhưng vì Git ban đầu là một bộ công cụ cho một hệ thống kiểm soát phiên bản thay vì một VCS thân thiện với người dùng hoàn chỉnh, nó có một số lệnh con thực hiện công việc cấp thấp và được thiết kế để được xâu chuỗi lại với nhau theo kiểu UNIX hoặc được gọi từ các tập tin kịch bản.
Những lệnh này thường được gọi là các lệnh "`plumbing`" (ống nước) của Git, trong khi các lệnh thân thiện với người dùng hơn được gọi là các lệnh "`porcelain`" (sứ).

Như bạn sẽ nhận thấy đến bây giờ, chín chương đầu tiên của cuốn sách này gần như chỉ đề cập đến các lệnh porcelain.
Nhưng trong chương này, bạn sẽ chủ yếu làm việc với các lệnh plumbing cấp thấp hơn, bởi vì chúng cho bạn quyền truy cập vào hoạt động bên trong của Git, và giúp chứng minh cách thức và lý do tại sao Git làm những gì nó làm.
Nhiều lệnh trong số này không có nghĩa là được sử dụng thủ công trên dòng lệnh, mà là được sử dụng như các khối xây dựng cho các công cụ mới và các tập tin kịch bản tùy chỉnh.

Khi bạn chạy `git init` trong một thư mục mới hoặc hiện có, Git tạo thư mục `.git`, đó là nơi gần như mọi thứ mà Git lưu trữ và thao tác được đặt.
Nếu bạn muốn sao lưu hoặc sao chép kho chứa của mình, việc sao chép thư mục duy nhất này sang nơi khác sẽ cung cấp cho bạn gần như mọi thứ bạn cần.
Toàn bộ chương này về cơ bản đề cập đến những gì bạn có thể thấy trong thư mục này.
Đây là những gì một thư mục `.git` mới được khởi tạo thường trông như thế nào:

[source,console]
----
$ ls -F1
config
description
HEAD
hooks/
info/
objects/
refs/
----

Tùy thuộc vào phiên bản Git của bạn, bạn có thể thấy một số nội dung bổ sung ở đó, nhưng đây là một kho chứa `git init` mới – đó là những gì bạn thấy theo mặc định.
Tập tin `description` chỉ được sử dụng bởi chương trình GitWeb, vì vậy đừng lo lắng về nó.
Tập tin `config` chứa các tùy chọn cấu hình cụ thể cho dự án của bạn, và thư mục `info` giữ một tập tin loại trừ toàn cục (((excludes))) cho các mẫu bị bỏ qua mà bạn không muốn theo dõi trong một tập tin `.gitignore`.
Thư mục `hooks` chứa các tập tin kịch bản móc phía máy khách hoặc phía máy chủ của bạn, được thảo luận chi tiết trong <<ch08-customizing-git#_git_hooks>>.

Điều này để lại bốn mục quan trọng: các tập tin `HEAD` và (chưa được tạo) `index`, và các thư mục `objects` và `refs`.
Đây là các phần cốt lõi của Git.
Thư mục `objects` lưu trữ tất cả nội dung cho cơ sở dữ liệu của bạn, thư mục `refs` lưu trữ các con trỏ vào các đối tượng commit trong dữ liệu đó (branches, tags, remotes và nhiều hơn nữa), tập tin `HEAD` trỏ đến nhánh bạn hiện đang check out, và tập tin `index` là nơi Git lưu trữ thông tin khu vực tổ chức (staging area) của bạn.
Bây giờ bạn sẽ xem xét từng phần này một cách chi tiết để xem Git hoạt động như thế nào.
