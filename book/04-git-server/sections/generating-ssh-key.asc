[[_generate_ssh_key]]
=== Tạo Khóa Công khai SSH

(((ssh, generating keys)))
Nhiều máy chủ Git xác thực bằng khóa công khai SSH.
Để cung cấp khóa công khai, mỗi người dùng trong hệ thống của bạn phải tạo một khóa nếu họ chưa có.
Quá trình này tương tự nhau trên tất cả các hệ điều hành.
Đầu tiên, bạn nên kiểm tra xem bạn đã có khóa chưa.
Theo mặc định, các khóa SSH của người dùng được lưu trữ trong thư mục `~/.ssh` của người dùng đó.
Bạn có thể dễ dàng kiểm tra xem bạn đã có khóa chưa bằng cách vào thư mục đó và liệt kê nội dung:

[source,console]
----
$ cd ~/.ssh
$ ls
authorized_keys2  id_dsa       known_hosts
config            id_dsa.pub
----

Bạn đang tìm kiếm một cặp tệp có tên giống như `id_dsa` hoặc `id_rsa` và một tệp phù hợp có phần mở rộng `.pub`.
Tệp `.pub` là khóa công khai của bạn và tệp còn lại là khóa riêng tư của bạn.
Nếu bạn không có các tệp này (hoặc bạn thậm chí không có thư mục `.ssh`), bạn có thể tạo chúng bằng cách chạy chương trình có tên `ssh-keygen`, được cung cấp cùng với gói SSH trên các hệ thống Linux/Mac và đi kèm với Git cho Windows:

[source,console]
----
$ ssh-keygen -o
Generating public/private rsa key pair.
Enter file in which to save the key (/home/schacon/.ssh/id_rsa):
Created directory '/home/schacon/.ssh'.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/schacon/.ssh/id_rsa.
Your public key has been saved in /home/schacon/.ssh/id_rsa.pub.
The key fingerprint is:
d0:82:24:8e:d7:f1:bb:9b:33:53:96:93:49:da:9b:e3 schacon@mylaptop.local
----

Đầu tiên, nó xác nhận nơi bạn muốn lưu khóa (`.ssh/id_rsa`), và sau đó nó hỏi mật khẩu hai lần, bạn có thể để trống nếu bạn không muốn nhập mật khẩu khi sử dụng khóa.
Tuy nhiên, nếu bạn sử dụng mật khẩu, hãy đảm bảo thêm tùy chọn `-o`, tùy chọn này lưu khóa riêng tư ở định dạng có khả năng chống lại việc bẻ khóa mật khẩu brute-force tốt hơn so với định dạng mặc định.
Bạn cũng có thể sử dụng công cụ `ssh-agent` để tránh phải nhập mật khẩu mỗi lần.

Bây giờ, mỗi người dùng làm điều này phải gửi khóa công khai của họ cho bạn hoặc bất kỳ ai đang quản trị máy chủ Git (giả sử bạn đang sử dụng thiết lập máy chủ SSH yêu cầu khóa công khai).
Tất cả những gì họ phải làm là sao chép nội dung của tệp `.pub` và gửi email cho bạn.
Các khóa công khai trông giống như thế này:

[source,console]
----
$ cat ~/.ssh/id_rsa.pub
ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAklOUpkDHrfHY17SbrmTIpNLTGK9Tjom/BWDSU
GPl+nafzlHDTYW7hdI4yZ5ew18JH4JW9jbhUFrviQzM7xlELEVf4h9lFX5QVkbPppSwg0cda3
Pbv7kOdJ/MTyBlWXFCR+HAo3FXRitBqxiX1nKhXpHAZsMciLq8V6RjsNAQwdsdMFvSlVK/7XA
t3FaoJoAsncM1Q9x5+3V0Ww68/eIFmb1zuUFljQJKprrX88XypNDvjYNby6vw/Pb0rwert/En
mZ+AW4OZPnTPI89ZPmVMLuayrD2cE86Z/il8b/gw3r3+1nKatmIkjn2so1d01QraTlMqVSsbx
NrRFi9wrf+M7Q== schacon@mylaptop.local
----

Để có hướng dẫn sâu hơn về cách tạo khóa SSH trên nhiều hệ thống, hãy xem hướng dẫn GitHub về khóa SSH tại https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent[^].
