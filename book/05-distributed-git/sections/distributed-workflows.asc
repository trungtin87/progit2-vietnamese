[[_distributed_workflows]]
=== Các Quy trình làm việc Phân tán

Không giống như các Hệ thống Kiểm soát Phiên bản Tập trung (CVCS), bản chất phân tán của Git cho phép bạn linh hoạt hơn nhiều trong cách các nhà phát triển cộng tác trong các dự án.
Trong các hệ thống tập trung, mỗi nhà phát triển là một nút làm việc ít nhiều theo mô hình trung tâm và nan hoa.
Tuy nhiên, trong Git, mỗi nhà phát triển có khả năng vừa là một nút vừa là một trung tâm; nghĩa là, mỗi nhà phát triển vừa có thể đóng góp mã cho các kho lưu trữ khác vừa có thể duy trì một kho lưu trữ công khai mà những người khác có thể dựa vào công việc của họ và họ có thể đóng góp vào đó.
Điều này mở ra một loạt các khả năng quy trình làm việc cho dự án và/hoặc nhóm của bạn, vì vậy chúng tôi sẽ đề cập đến một vài mô hình phổ biến tận dụng sự linh hoạt này.

==== Quy trình làm việc Tập trung

(((workflows, centralized)))
Trong các hệ thống tập trung, thường có một mô hình cộng tác duy nhất -- quy trình làm việc tập trung.
Một trung tâm, hoặc kho lưu trữ, có thể chấp nhận mã, và mọi người đồng bộ hóa công việc của họ với nó.
Một số nhà phát triển là các nút -- người tiêu dùng của trung tâm đó -- và đồng bộ hóa với một nơi đó.

.Quy trình làm việc tập trung
image::images/centralized_workflow.png[Quy trình làm việc tập trung]

Điều này có nghĩa là nếu hai nhà phát triển sao chép từ trung tâm và cả hai đều thực hiện các thay đổi, nhà phát triển đầu tiên đẩy các thay đổi của họ trở lại có thể làm như vậy mà không có vấn đề gì.
Nhà phát triển thứ hai phải hợp nhất công việc của người đầu tiên trước khi đẩy các thay đổi lên, để không ghi đè lên các thay đổi của nhà phát triển đầu tiên.
Khái niệm này đúng trong Git cũng như trong Subversion (hoặc bất kỳ CVCS nào), và mô hình này hoạt động hoàn hảo trong Git.

Nếu bạn có một nhóm nhỏ hoặc đã quen với quy trình làm việc tập trung trong công ty của mình, bạn có thể dễ dàng tiếp tục sử dụng quy trình làm việc đó với Git.
Chỉ cần thiết lập một kho lưu trữ duy nhất, và cấp cho mọi người trong nhóm của bạn quyền đẩy; Git sẽ không để người dùng ghi đè lên nhau.
Nếu một nhà phát triển sao chép, thực hiện các thay đổi, và sau đó cố gắng đẩy chúng lên trong khi một nhà phát triển khác đã đẩy trong thời gian đó, máy chủ sẽ từ chối các thay đổi của nhà phát triển đó.
Họ sẽ được thông báo rằng họ đang cố gắng đẩy các thay đổi không phải là tua đi nhanh và họ sẽ phải kéo và hợp nhất trước khi có thể đẩy.

Quy trình làm việc này hấp dẫn đối với rất nhiều người vì nó là một mô hình mà nhiều người quen thuộc và thoải mái.
Đây không phải là quy trình làm việc được sắp xếp hợp lý nhất mà Git có thể hỗ trợ, nhưng thường thì nó có thể là hiệu quả nhất.

==== Quy trình làm việc của Người quản lý Tích hợp

(((workflows, integration-manager)))
Bởi vì Git cho phép bạn có nhiều kho lưu trữ từ xa, có thể có một quy trình làm việc trong đó mỗi nhà phát triển có quyền ghi vào kho lưu trữ công khai của riêng họ và quyền đọc vào của mọi người khác.
Kịch bản này thường bao gồm một kho lưu trữ chính tắc đại diện cho dự án "`chính thức`".
Để đóng góp vào dự án đó, bạn tạo bản sao công khai của riêng mình của dự án và đẩy các thay đổi của bạn vào đó.
Sau đó, bạn có thể gửi một yêu cầu đến người bảo trì của dự án chính để kéo các thay đổi của bạn vào.
Người bảo trì sau đó có thể thêm kho lưu trữ của bạn làm một điều khiển từ xa, kiểm tra các thay đổi của bạn cục bộ, hợp nhất chúng vào nhánh của họ, và đẩy trở lại kho lưu trữ của họ.
Quá trình hoạt động như sau (xem <<wfdiag_b>>):

1.  Người bảo trì dự án đẩy lên kho lưu trữ công khai của họ.
2.  Một người đóng góp sao chép kho lưu trữ đó và thực hiện các thay đổi.
3.  Người đóng góp đẩy lên bản sao công khai của riêng họ.
4.  Người đóng góp gửi cho người bảo trì một email yêu cầu họ kéo các thay đổi.
5.  Người bảo trì thêm repo của người đóng góp làm một điều khiển từ xa và hợp nhất cục bộ.
6.  Người bảo trì đẩy các thay đổi đã hợp nhất lên kho lưu trữ chính.

[[wfdiag_b]]
.Quy trình làm việc của người quản lý tích hợp
image::images/integration-manager.png[Quy trình làm việc của người quản lý tích hợp]

Đây là một quy trình làm việc rất phổ biến với các trang web như GitHub, nơi dễ dàng phân nhánh một dự án và đẩy các thay đổi của bạn vào nhánh của bạn để người bảo trì xem.
Một trong những lợi thế chính của phương pháp này là bạn có thể tiếp tục làm việc, và người bảo trì của kho lưu trữ chính có thể kéo các thay đổi của bạn vào bất cứ lúc nào.
Người đóng góp không phải chờ đợi dự án kết hợp các thay đổi của họ -- mỗi bên có thể làm việc theo tốc độ của riêng mình.

==== Quy trình làm việc của Độc tài và Trung úy

(((workflows, dictator and lieutenants)))
Đây là một biến thể của một quy trình làm việc nhiều kho lưu trữ.
Nó thường được sử dụng bởi các dự án khổng lồ với hàng trăm cộng tác viên; một ví dụ nổi tiếng là nhân Linux.
Nhiều người quản lý tích hợp phụ trách các phần nhất định của kho lưu trữ; họ được gọi là "trung úy".
Tất cả các trung úy đều có một người quản lý tích hợp được gọi là "nhà độc tài nhân từ".
Kho lưu trữ của nhà độc tài nhân từ đóng vai trò là kho lưu trữ tham chiếu mà tất cả các cộng tác viên cần kéo từ đó.
Quá trình hoạt động như thế này (xem <<wfdiag_c>>):

1.  Các nhà phát triển thông thường làm việc trên nhánh chủ đề của họ và rebase công việc của họ trên đỉnh của `master`.
Nhánh `master` là của nhà độc tài.
2.  Các trung úy hợp nhất các nhánh chủ đề của các nhà phát triển vào nhánh `master` của họ.
3.  Nhà độc tài hợp nhất các nhánh `master` của các trung úy vào nhánh `master` của nhà độc tài.
4.  Nhà độc tài đẩy `master` của họ lên kho lưu trữ tham chiếu để các nhà phát triển khác có thể rebase trên đó.

[[wfdiag_c]]
.Quy trình làm việc của nhà độc tài nhân từ
image::images/benevolent-dictator.png[Q trình làm việc của nhà độc tài nhân từ]

Loại quy trình làm việc này không phổ biến nhưng có thể hữu ích trong các dự án rất lớn hoặc trong các môi trường có thứ bậc cao, vì nó cho phép người lãnh đạo dự án (nhà độc tài) ủy thác nhiều công việc và thu thập các tập hợp mã lớn để tích hợp.

Đây là một số quy trình làm việc thường được sử dụng có thể có với một hệ thống phân tán như Git, nhưng bạn có thể thấy rằng nhiều biến thể có thể có để phù hợp với quy trình làm việc thực tế cụ thể của bạn.
Bây giờ bạn có thể (chúng tôi hy vọng) xác định quy trình làm việc nào có thể phù hợp với bạn, chúng tôi sẽ đề cập đến một số ví dụ cụ thể hơn về cách hoàn thành các vai trò chính tạo nên các luồng khác nhau.
Trong phần tiếp theo, bạn sẽ tìm hiểu về một vài trong số các mô hình phổ biến nhất để đóng góp vào một dự án.